/*!  ampedjs 0.1.0 | 2014 Alvin Teh */
define("core/modules/core/helpers/uuid-helper",[],function(){var e=function(){return{generateUuid:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return("undefined"==typeof e||e===!0)&&(t=t.replace(/\-/g,"")),t.replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}}}();return e}),define("core/modules/core/models/controller",["require","../helpers/uuid-helper"],function(e){var t=e("../helpers/uuid-helper"),n={},r=t.generateUuid(),o=function(e){var t={models:e?e instanceof Array?e:[e]:[],actions:[]};return this[r]=function(e){return e===n?t:void 0},this};return o.prototype=function(e){return e.getModels=function(){return this[r](n).models},e.getModel=function(){var e=this[r](n).models;return e.length>=1?e[0]:null},e.getAction=function(e){var t=this[r](n).actions;return t[e]},e.getActions=function(){return this[r](n).actions},e.addAction=function(e,t,o){var i=this[r](n).actions;i[e]={"function":t,view:o?o.view:null}},e.removeAction=function(e){var t=this[r](n).actions;delete t[e]},e}(o.prototype||{}),o}),define("core/modules/core/core.controller",["require","./models/controller"],function(e){var t=e("./models/controller"),n=null,r=function(){var e=[],n={add:function(t){-1===e.indexOf(t)&&e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},has:function(t){return-1!==e.indexOf(t)},create:function(n){var r=new t(n);return e.push(r),r},Controller:t};return n};return function(){return(null===n||"undefined"==typeof n)&&(n=r),n}()}),define("core/modules/core/helpers/model-helper",[],function(){var e=function(){return{getGetter:function(e){return"get"+e.charAt(0).toUpperCase()+e.substring(1)},getSetter:function(e){return"set"+e.charAt(0).toUpperCase()+e.substring(1)},generateGettersSetters:function(t,n){for(var r=0,o=n.length;o>r;r++)!function(n){t[e.getGetter(n)]=function(){return this.get(n)},t[e.getSetter(n)]=function(e){this.set(n,e)}}(n[r])}}}();return e}),define("core/modules/core/models/event",["require","../helpers/model-helper","../helpers/uuid-helper"],function(e){var t=e("../helpers/model-helper"),n=e("../helpers/uuid-helper"),r={},o=n.generateUuid(),i=function(e,t,n){var i={target:e,name:t,data:n};return this[o]=function(e){return e===r?i:void 0},this};return i.prototype=function(e){return e.get=function(e){return this[o](r)[e]},e.set=function(e,t){if("undefined"!=typeof t)this[o](r)[e]=t;else for(var n in e)this[o](r)[n]=e[n]},t.generateGettersSetters(e,["target","name","data"]),e.has=function(e){return"undefined"!=typeof this[o](r)[e]&&null!==this[o](r)[e]},e.toObject=function(){var e={};for(var t in this)if("function"==typeof this[t]&&0===t.indexOf("set")){var n=t.charAt(3).toLowerCase()+t.substring(4),r="get"+t.substring(3);if("function"==typeof this[r]&&"getDataValue"!==r){var o=this[r]();o&&"object"==typeof o&&"function"==typeof o.toObject&&(o=o.toObject()),e[n]=o}}return e},e}(i.prototype||{}),i}),define("core/modules/core/helpers/event-helper",[],function(){var e=function(){var e=[];return{observe:function(t,n,r){for(var o,i=0,u=e.length;u>i;i++)e[i].object===t&&(o=e[i]);if(!o){var a={object:t,events:{}};e.push(a),o=a}var s=o.events[n];if(!s){var l=[];o.events[n]=l,s=l}s.push({func:r,type:"intra"})},unobserve:function(t,n,r){for(var o=0,i=e.length;i>o;o++){var u=e[o];if(u.object===t){var a=u.events[n];if(!a)return;for(var s=a.length-1;s>=0;s--)(a[s].func===r||"undefined"==typeof r)&&a.splice(s,1);break}}},trigger:function(t){for(var n=0,r=e.length;r>n;n++){var o=e[n];if(o.object===t.getTarget()){var i=o.events[t.getName()];if(!i)return;for(var u=0,a=i.length;a>u;u++)i[u].func(t);break}}}}}();return e}),define("core/modules/core/core.event",["require","./models/event","./helpers/event-helper"],function(e){var t=e("./models/event"),n=e("./helpers/event-helper"),r=null,o=function(){var e={observe:n.observe,unobserve:n.unobserve,trigger:n.trigger,Event:t};return e};return function(){return(null===r||"undefined"==typeof r)&&(r=o),r}()}),define("core/modules/core/models/helper",[],function(){var e=function(){};return e.addStaticMethod=function(e,t,n){e[t]=n},e.removeStaticMethod=function(e,t){delete e[t]},e.hasStaticMethod=function(e,t){return"function"==typeof e[t]&&"function"!=typeof e.prototype[t]},e}),define("core/modules/core/core.helper",["require","./models/helper"],function(e){var t=e("./models/helper"),n=null,r=function(){var e={create:function(){var e={};return e.prototype=Object.create(t.prototype),e.addStaticMethod=function(n,r){t.addStaticMethod(e,n,r)},e.removeStaticMethod=function(n){t.removeStaticMethod(e,n)},e.hasStaticMethod=function(n){return t.hasStaticMethod(e,n)},e}};return e};return function(){return(null===n||"undefined"==typeof n)&&(n=r),n}()}),define("core/modules/core/helpers/string-helper",[],function(){var e=function(){return{convertToCamelCase:function(e){return e.replace(/(\_\w)/g,function(e){return e[1].toUpperCase()})},convertToSnakeCase:function(e){var t=e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()});return"_"===t.charAt(0)&&(t=t.substring(1,2).toLowerCase()+t.substring(2)),t},lowercaseFirst:function(e){return e.charAt(0).toLowerCase()+e.substring(1)},uppercaseFirst:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},humanize:function(e){return e.replace(/([A-Z])/g,function(e){return" "+e.toLowerCase()}).replace(/_/g," ")}}}();return e}),define("core/modules/core/models/model",["require","../models/event","../helpers/event-helper","../helpers/string-helper","../helpers/uuid-helper"],function(e){var t=e("../models/event"),n=e("../helpers/event-helper"),r=e("../helpers/string-helper"),o=e("../helpers/uuid-helper"),i={},u=o.generateUuid(),a=function(e,t){for(var n={id:null,attributes:{},validationRules:{}},r=0,o=t.length;o>r;r++)n.attributes[t[r]]=null;return this[u]=function(e){return e===i?n.attributes:void 0},this};return a.init=function(e,o){o.prototype=function(a){var s={modelName:e,validationRules:{}};return o.addMethod=function(e,t){o.prototype[e]=t},o.removeMethod=function(e){delete o.prototype[e]},o.hasMethod=function(e){return"function"==typeof o.prototype[e]},o.addStaticMethod=function(e,t){o[e]=t},o.removeStaticMethod=function(e){delete o[e]},o.hasStaticMethod=function(e){return"function"==typeof o[e]&&"function"!=typeof o.prototype[e]},o.addStaticAttribute=function(e,t){o[e]=t},o.removeStaticAttribute=function(e){delete o[e]},o.hasStaticAttribute=function(e){var t=typeof o[e];return"undefined"!==t&&"function"!==t&&typeof o.prototype[e]!==t},o.getModelName=function(){return s.modelName},o.fromObject=function(e){var t=new o;for(var n in e)e.hasOwnProperty(n)&&"object"!=typeof e[n]&&"function"!=typeof e[n]&&t.set(r.convertToCamelCase(n),e[n]);return t},o.getValidationRules=function(){return s.validationRules},o.setValidationRules=function(e){s.validationRules=e},a.get=function(e){return this[u](i)[e]},a.set=function(e,t,n){var r,o,a=n&&n.silent===!0,s=[];if("object"!=typeof e&&"undefined"!=typeof t)o=this[u](i)[e],this[u](i)[e]=t,o!==t&&s.push({attribute:e,oldValue:o,newValue:t});else{a=t&&t.silent===!0;for(var l in e)o=this[u](i)[l],this[u](i)[l]=e[l],o!==e[l]&&s.push({attribute:l,oldValue:o,newValue:e[l]})}if(s.length>0){for(var c=0,d=s.length;d>c;c++)r=s[c],a||this.trigger("change:"+r.attribute,{oldValue:r.oldValue,newValue:r.newValue});a||this.trigger("change",s)}},a.has=function(e){return"undefined"!=typeof this[u](i)[e]&&null!==this[u](i)[e]},a.getId=function(){return this[u](i).id},a.setId=function(e){var t=this[u](i).id;t!==e&&(this.trigger("change:id",{oldValue:t,newValue:e}),this.trigger("change",[{attribute:"id",oldValue:t,newValue:e}])),this[u](i).id=e},a.getModel=function(){return o},a.toObject=function(){var e={},t=this[u](i);for(var n in t)e[n]=t[n];return e},a.trigger=function(e,r){n.trigger(new t(this,e,r))},a.observe=function(e,t){n.observe(this,e,t)},a.unobserve=function(e,t){n.unobserve(this,e,t)},a.validate=function(){function e(e){a.push(f.message||e)}function t(e){return"undefined"==typeof e||null===e||""===e}var n,o,a,l,c,d,f,h=s.validationRules,p={};for(var m in h){n=h[m],c=this[u](i)[m],a=[],l=!1,o=!1,d=r.uppercaseFirst(r.humanize(m));for(var v=0,g=n.length;g>v;v++)if(n[v].required===!0){o=!0;break}for(l=!o&&(null===c||"undefined"==typeof c||""===c),v=0,g=n.length;g>v;v++)if(f=n[v],f.required)t(c)&&e(d+" is required.");else if(f.type)l||("string"===f.type&&"string"!=typeof c?e(d+" should be a string."):"int"!==f.type||"number"==typeof c&&c%1===0?"number"===f.type&&"number"!=typeof c?e(d+" should be a number."):"boolean"===f.type&&"boolean"!=typeof c&&e(d+" should be a boolean."):e(d+" should be an integer."));else if(f.minLength)(t(c)||"string"!=typeof c||c.length<f.minLength)&&e(d+" should be at least "+f.minLength+" characters long.");else if(f.maxLength)(t(c)||"string"!=typeof c||c.length>f.maxLength)&&e(d+" should be at most "+f.maxLength+" characters long.");else if(f.minValue)(t(c)||"number"!=typeof c||c<f.minValue)&&e(d+" should be at least "+f.minValue+".");else if(f.maxValue)(t(c)||"number"!=typeof c||c>f.maxValue)&&e(d+" should be at most "+f.maxValue+".");else if(f.format)("email"===f.format&&!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c)||"alpha"===f.format&&!/^[a-z]*$/i.test(c)||"flag"===f.format&&0!==c&&1!==c||"alphanumeric"===f.format&&!/^[a-z0-9]*$/i.test(c)||"creditcard"===f.format&&!/^(?:4[0-9]{12}(?:[0-9]{3})|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/.test(c))&&e(d+" should be a valid "+f.format);else if(f.regex)(t(c)||!f.regex.test(c))&&e(d+" should match "+f.regex+".");else if(f.function){var E=f.function(c,this);E!==!0&&e(E)}a.length>0&&(p[m]=a)}return"{}"===JSON.stringify(p)||p},a.isValid=function(){return this.validate()===!0},a}(o.prototype||{})},a}),define("core/modules/core/helpers/function-helper",[],function(){var e=function(){return{noop:function(){},override:function(e,t){return function(){t(e,this,arguments)}}}}();return e}),define("core/modules/core/core.model",["require","./models/model","./helpers/function-helper","./helpers/model-helper"],function(e){var t=e("./models/model"),n=e("./helpers/function-helper"),r=e("./helpers/model-helper"),o=null,i=function(e){var o={create:function(o,i,u){var a,s=u&&u.parent?u.parent:t,l=u&&u.hasOwnProperty("constructor")&&"function"==typeof u.constructor?u.constructor:null;if(l)a=s===t?function(){return s.apply(this,[o,i]),l.apply(this,arguments),this}:function(){return s.apply(this,arguments),l.apply(this,arguments),this};else{var c=function(){var e={};if(arguments)for(var t=0,n=i.length;n>t;t++)e[i[t]]="undefined"!=typeof arguments[t]?arguments[t]:null;this.set(e)};a=s===t?function(){return s.apply(this,[o,i]),c.apply(this,arguments),this}:function(){return s.apply(this,arguments),c.apply(this,arguments),this}}a.prototype=Object.create(s.prototype),t.init(o,a);for(var d,f=0,h=i.length;h>f;f++)d=i[f],function(t){a.prototype[r.getGetter(t)]=function(){return this.get(t)},a.prototype[r.getSetter(t)]=function(n){this.set(t,n),e.View.refresh(this)}}(i[f]);return a.prototype.set=n.override(a.prototype.set,function(t,n,r){t.apply(n,r),e.View.refresh(n)}),a.prototype.setId=n.override(a.prototype.setId,function(t,n,r){t.apply(n,r),e.View.refresh(n)}),a}};return o};return function(){return(null===o||"undefined"==typeof o)&&(o=i),o}()}),define("core/modules/core/models/module",[],function(){var e=function(e){for(var t in e)this[t]=e[t];return this};return e}),define("core/modules/core/models/promise",["require","../helpers/uuid-helper"],function(e){var t=e("../helpers/uuid-helper"),n={},r=t.generateUuid(),o={UNFULFILLED:0,FULFILLED:1,REJECTED:2},i=function(e){var t={state:o.UNFULFILLED,queue:[],value:null};this[r]=function(e){return e===n?t:void 0};var i=this;return e&&e(function(e){i.resolve(e)},function(e){i.transition(o.REJECTED,e)}),this};return i.prototype=function(e){var t=function(e){e.get("state")!==o.UNFULFILLED&&setTimeout(function(){for(var t=e.get("queue");t.length>0;){var n,r=t.shift();try{n=(e.get("state")===o.FULFILLED?r.fulfill||function(e){return e}:r.reject||function(e){throw e})(e.get("value"))}catch(i){r.promise.transition(o.REJECTED,i);continue}r.promise.resolve(n)}},0)};return e.get=function(e){return this[r](n)[e]},e.transition=function(e,i){var u=this.get("state");if(u===e||u!==o.UNFULFILLED||"undefined"==typeof i||e!==o.FULFILLED&&e!==o.REJECTED||arguments.length<2)return!1;var a=this[r](n);a.state=e,a.value=i,t(this)},e.then=function(e,n){var r=new i,o=this.get("queue");return o.push({fulfill:"function"==typeof e&&e,reject:"function"==typeof n&&n,promise:r}),t(this),r},e.resolve=function(e){if(this===e)this.transition(o.REJECTED,new Error("Illegal promise self-resolution."));else if(e&&e instanceof i)if(e.get("state")===o.UNFULFILLED){var t=this;e.then(function(e){t.resolve(e)},function(e){t.transition(o.REJECTED,e)})}else this.transition(e.get("state"),e.get("value"));else if("object"!=typeof e&&"function"!=typeof e||null===e)this.transition(o.FULFILLED,e);else{var n=!1,r=e.then;if("function"==typeof r){var u=this;r.call(e,function(e){n||u.resolve(e),n=!0},function(e){n||u.transition(o.REJECTED,e),n=!0})}else this.transition(o.FULFILLED,e)}},e.reject=function(e){this.transition(o.REJECTED,e)},e}(i.prototype||{}),i.convert=function(e){return function(){var t=this,n=[].slice.call(arguments);return new i(function(r,o){e.apply(t,[o,r].concat(n))})}},i}),define("core/modules/core/core.module",["require","./models/module","./models/promise"],function(e){var t=e("./models/module"),n=e("./models/promise"),r=null,o=function(){var r={},o={create:function(e,n){var o=new t(n);return r[e]=o,o},get:function(e){return r[e]},load:function(t){var r=["module"],i=function(e){var t=e.split("."),n=1===t.length?"core":t[1],o=t[1===t.length?0:1].toLowerCase(),i="../../../"+n+"/modules/"+o+"/"+o;r.push(i)};if("string"==typeof t)i(t);else for(var u=0,a=t.length;a>u;u++)i(t[u]);return new n(function(n,i){e(r,function(){var e={};if("string"==typeof t)e=o.get(t);else for(var r=0,i=t.length;i>r;r++)e[t[r]]=o.get(t[r]);n(e)},function(e){i(e)})})}};return o};return function(){return(null===r||"undefined"==typeof r)&&(r=o),r}()}),define("core/modules/core/core.route",["require","./models/event","./helpers/event-helper"],function(e){var t=e("./models/event"),n=e("./helpers/event-helper"),r=null,o=function(){var e,r=[],o=null,i=function(e,t){var n=new RegExp(t.replace(/:[^\s/]+/g,"([\\w-]+)"));return e.match(n)},u=function(e){o="/";for(var u=0,a=r.length;a>u;u++){var s=r[u],l=i(e,s.path);if(null!==l){var c=s.controller.getAction(s.action);o=e,null!==c.view&&n.trigger(new t(c.view,"enter",{path:o})),l.shift(),c.function.apply(s.controller,l);break}}},a={isBound:function(e){for(var t=0,n=r.length;n>t;t++)if(null!==i(e,r[t].path))return!0;return!1},getBaseUrl:function(){return e},setBaseUrl:function(t){e=t},bind:function(e,t,n){var o=[],i=e;if("/"!==i&&("/"!==i.charAt(0)&&(i="/"+i),i.lastIndexOf("/")===i.length-1&&(i=i.substring(0,i.length-1))),"undefined"==typeof n){var u=t.getActions();for(var a in u)o.push({path:i+"/"+a,controller:t,action:a,inferred:!0})}else o.push({path:i,controller:t,action:n,inferred:!1});o.forEach(function(e){for(var t=!1,n=0,o=r.length;o>n;n++)if(r[n].path===e.path){e.inferred&&!r[n].inferred?t=!0:r.splice(n,1);break}t||r.push(e)})},unbind:function(e,t){t=t===!0;var n=e;"/"!==n.length&&("/"!==n.charAt(0)&&(n="/"+n),n.lastIndexOf("/")===n.length-1&&(n=n.substring(0,n.length-1)));for(var o=r.length-1;o>=0;o--)(r[o].path===n||t&&0===r[o].path.indexOf("/"===n?"/":n+"/"))&&r.splice(o,1)},go:function(e){if(a.isBound(o))for(var s=0,l=r.length;l>s;s++)if(null!==i(o,r[s].path)){var c=r[s].action.view;null!==c&&n.trigger(new t(c,"leave",{path:o}))}"/"===e?(o="/",history.pushState(null,null,a.getBaseUrl())):(history.pushState(null,null,a.getBaseUrl()+e.substring(1)),u(e))}};return e=window.location.href,"#"===e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),"/"!==e.substr(e.length-1)&&(e=e.substring(0,e.lastIndexOf("/"))+"/"),window.addEventListener("popstate",function(){if(a.isBound(o))for(var s=0,l=r.length;l>s;s++)if(i(o,r[s].path)){var c=r[s].controller.getAction(r[s].action).view;null!==c&&n.trigger(new t(c,"leave",{path:o}))}0===window.location.href.indexOf(e)&&u(window.location.href.substring(e.length))}),a};return function(){return(null===r||"undefined"==typeof r)&&(r=o),r}()}),define("core/modules/core/models/element",["require","../helpers/uuid-helper"],function(e){var t=e("../helpers/uuid-helper"),n={},r=t.generateUuid(),o=function(e){var t={dataBindings:[],elements:function(e){return e instanceof Array?e:e instanceof HTMLElement?[e]:document.querySelectorAll(e)}(e)};return this[r]=function(e){return e===n?t:void 0},this};return o.REVERSE_BINDING=0,o.ONE_WAY_BINDING=1,o.TWO_WAY_BINDING=2,o.prototype=function(e){return e.getElement=function(){return this[r](n).elements[0]},e.getElements=function(){return this[r](n).elements},e.isDataBoundTo=function(e){for(var t=this[r](n).dataBindings,o=0,i=t.length;i>o;o++){var u=t[o];if(u.object===e)return!0}return!1},e.hasDataBindings=function(){return this[r](n).dataBindings.length>0},e.refresh=function(e){for(var t,i,u,a,s,l=this[r](n),c=l.dataBindings,d=l.elements,f=0,h=c.length;h>f;f++)if(t=c[f],("undefined"==typeof e||t.object===e)&&t.direction!==o.REVERSE_BINDING){i=t.objectProperty;for(var p=0,m=t.elementProperties.length;m>p;p++)if(u=t.elementProperties[p],a=t.forwardTransform,s=t.object.get(i),a&&(s=a(s,e)),null!==u)for(var v=0,g=d.length;g>v;v++)0===u.indexOf("data-")?d[v].setAttribute("data-"+u.substring(5),s):0===u.indexOf("dataset.")?d[v].setAttribute("data-"+u.substring(8),s):0===u.indexOf("style.")?d[v].style[u.substring(6)]=s:d[v][u]=s}},e.addDataBinding=function(e,t,i){var u=i&&"undefined"!=typeof i.elementProperties?i.elementProperties:void 0,a=i&&"undefined"!=typeof i.direction?i.direction:o.TWO_WAY_BINDING,s=i&&i.forwardTransform?i.forwardTransform:void 0,l=i&&i.backwardTransform?i.backwardTransform:void 0,c=this[r](n),d=c.dataBindings,f=this;d.push({elementProperties:function(e){return"undefined"==typeof e?"undefined"==typeof f.getElements()[0].value?["innerHTML"]:["value"]:e instanceof Array?e:[e]}(u),object:e,objectProperty:t,direction:a,forwardTransform:s,backwardTransform:l}),a!==o.REVERSE_BINDING&&this.refresh(e)},e.removeDataBinding=function(e,t,o){for(var i,u=o?o.elementProperties:void 0,a=o?o.direction:void 0,s=o?o.forwardTransform:void 0,l=o?o.backwardTransform:void 0,c=this[r](n),d=c.dataBindings,f=u instanceof Array?u.sort():[u],h=d.length-1;h>=0;h--)i=d[h],i.object!==e||"undefined"!=typeof t&&i.objectProperty!==t||"undefined"!=typeof u&&JSON.stringify(i.elementProperties)!==JSON.stringify(f)||"undefined"!=typeof a&&i.direction!==a||"undefined"!=typeof s&&i.forwardTransform!==s||"undefined"!=typeof l&&i.backwardTransform!==l||d.splice(h,1)},e}(o.prototype||{}),o}),define("core/modules/core/models/view",["require","../models/event","../helpers/event-helper","../helpers/uuid-helper"],function(e){var t=e("../models/event"),n=e("../helpers/event-helper"),r=e("../helpers/uuid-helper"),o={},i=r.generateUuid(),u=function(e){var t={dataBindings:[],containerElement:function(e){return e instanceof HTMLElement?e:document.querySelector(e)}(e),elements:[]};return this[i]=function(e){return e===o?t:void 0},this};return u.prototype=function(e){return e.getContainerElement=function(){return this[i](o).containerElement},e.getElements=function(){return this[i](o).elements},e.addElement=function(e){var t=this[i](o).elements;if(-1===t.indexOf(e)){var n=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}(this[i](o).containerElement,e.getElement());n&&t.push(e)}},e.removeElement=function(e){var t=this[i](o).elements,n=t.indexOf(e);-1!==n&&t.splice(n,1)},e.hasElement=function(e){var t=this[i](o).elements;return-1!==t.indexOf(e)},e.refresh=function(e){for(var t=this[i](o),n=t.elements,r=0,u=n.length;u>r;r++)n[r].refresh(e)},e.trigger=function(e,r){n.trigger(new t(this,e,r))},e.observe=function(e,t){n.observe(this,e,t)},e.unobserve=function(e,t){n.unobserve(this,e,t)},e}(u.prototype||{}),u}),define("core/modules/core/core.view",["require","./models/element","./models/view","./helpers/function-helper"],function(e){var t=e("./models/element"),n=e("./models/view"),r=e("./helpers/function-helper"),o=null,i=function(){for(var e=[],o=[],i=function(t){for(var n,r=0,o=e.length;o>r;r++)n=e[r],n.element===t.target&&n.event===t.type&&n.listener.apply(void 0,[t])},u=function(t){for(var n,r=0,o=e.length;o>r;r++)n=e[r],"mutation"===n.event&&(n.element===t.target||"characterData"===t.type&&n.element===t.target.parentElement)&&n.listener.apply(void 0,[t])},a=["blur","change","click","focus","input","keypress","keyup","mousedown","mouseup","mouseenter","mouseleave","mouseover","mouseout","pause","play","ratechange","seeked","volumechange"],s=0,l=a.length;l>s;s++)document.addEventListener(a[s],i);if(window.MutationObserver||window.WebkitMutationObserver){var c=new window[(window.MutationObserver?"":"WebKit")+"MutationObserver"](function(e){e.forEach(function(e){u(e)})});c.observe(window.document.querySelector("body"),{attributes:!0,characterData:!0,childList:!0,subtree:!0})}t.prototype.addDataBinding=r.override(t.prototype.addDataBinding,function(n,r,o){n.apply(r,o);var i=o[0],u=o[1],a=o[2],s=function(e){return"undefined"==typeof e?"undefined"==typeof r.getElements()[0].value?["innerHTML"]:["value"]:e instanceof Array?e:[e]}(a?a.elementProperties:void 0),l=o[2]&&"undefined"!=typeof a.direction?a.direction:t.TWO_WAY_BINDING;if(l!==t.ONE_WAY_BINDING)for(var c,f,h=["change","input"],p=r.getElements(),m=o[2]?o[2].backwardTransform:null,v=0,g=p.length;g>v;v++)if(c=p[v],-1!==s.indexOf("value"))for(var E=0,y=h.length;y>E;E++)e.push({element:c,event:h[E],listener:function(){f=c.value,m&&(f=m(f)),i.set(u,f),d.refresh(i)}});else e.push({element:c,event:"mutation",listener:function(e){"attributes"===e.type?-1!==s.indexOf(e.attributeName)&&(f=0===e.attributeName.indexOf("data-")?c.dataset[e.attributeName.substring(5)]:c[e.attributeName],m&&(f=m(f)),i.set(u,f),d.refresh(i)):("characterData"===e.type||"childList"===e.type)&&-1!==s.indexOf("innerHTML")&&(f=c.innerHTML,m&&(f=m(f)),i.set(u,f),d.refresh(i))}})}),t.prototype.removeDataBinding=r.override(t.prototype.removeDataBinding,function(n,r,o){n.apply(r,o);var i=o[2],u=i?i.elementProperties:void 0,a=i?i.direction:void 0;if(a!==t.ONE_WAY_BINDING)for(var s,l,c=["change","input"],d=r.getElements(),f=0,h=d.length;h>f;f++)if(s=d[f],"undefined"==typeof u&&"undefined"!=typeof r.getElements()[0].value||"undefined"!=typeof u&&-1!==u.indexOf("value"))for(var p=0,m=c.length;m>p;p++)for(var v=0,g=e.length;g>v;v++)l=e[v],l.element===s&&-1!==c.indexOf(l.event)&&(e.splice(v,1),v--,g--);else for(var E=0,y=e.length;y>E;E++)l=e[E],l.element===s&&-1!==c.indexOf(l.event)&&(e.splice(E,1),E--,y--)});var d={add:function(e){-1===o.indexOf(e)&&o.push(e)},remove:function(e){var t=o.indexOf(e);-1!==t&&o.splice(t,1)},has:function(e){return-1!==o.indexOf(e)},create:function(e){var t=new n(e);return o.push(t),t},refresh:function(e){for(var t=0,n=o.length;n>t;t++)o[t].refresh(e)},Element:function(){return{create:function(e,r){var o=new t(e);return r instanceof n&&r.addElement(o),o},REVERSE_BINDING:t.REVERSE_BINDING,ONE_WAY_BINDING:t.ONE_WAY_BINDING,TWO_WAY_BINDING:t.TWO_WAY_BINDING}}(),View:n};return d};return function(){return(null===o||"undefined"==typeof o)&&(o=i),o}()}),define("core/modules/core/core",["require","./core.controller","./core.event","./core.helper","./core.model","./core.module","./core.route","./core.view"],function(e){var t=e("./core.controller"),n=e("./core.event"),r=e("./core.helper"),o=e("./core.model"),i=e("./core.module"),u=e("./core.route"),a=e("./core.view"),s=function(){var e={};return e.Controller=new t,e.Event=new n,e.Helper=new r,e.Model=new o(e),e.Module=new i,e.Route=new u,e.View=new a,e.go=e.Route.go,e}();return s}),define("ampedjs",["require","./core/modules/core/core"],function(e){var t=e("./core/modules/core/core");return t}),define("core/modules/ajax/models/xhr",["require","../../../../ampedjs","../../core/models/promise"],function(e){var t=e("../../../../ampedjs"),n=e("../../core/models/promise"),r=t.Model.create("Xhr",["url","method","data","status","response"],{constructor:function(e,t){this.set({url:e,method:t?t:r.METHOD_GET})}});r.addStaticAttribute("METHOD_GET","GET"),r.addStaticAttribute("METHOD_DELETE","DELETE"),r.addStaticAttribute("METHOD_POST","POST"),r.addStaticAttribute("METHOD_PUT","PUT");var o=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push("[object Object]"!==Object.prototype.toString.call(e[n])?n+"="+e[n]:o(e[n]));return t.join("&")};return r.addMethod("send",function(){var e=this,i=new n;if(window.XMLHttpRequest){var u=new window.XMLHttpRequest;u.onreadystatechange=function(){4===u.readyState&&(e.set({response:u.responseText,status:u.status}),t.Event.trigger(new t.Event.Event(e,"success")),i.resolve(u.responseText))};var a=e.get("data"),s=e.get("method"),l=e.get("url");a?s===r.METHOD_GET?l+="?"+o(a):a=o(a):a=void 0,u.open(s,l),a&&s!==r.METHOD_GET&&u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(a)}else i.reject(new Error("Unable to create XMLHttpRequest."));return i}),r}),define("core/modules/ajax/ajax",["require","../../../ampedjs","./models/xhr"],function(e){var t=e("../../../ampedjs"),n=e("./models/xhr");return t.Module.create("Ajax",{Xhr:n})}),define("core/modules/collections/models/collection",["require","../../../../ampedjs"],function(e){var t=e("../../../../ampedjs"),n=t.Model.create("Collection",["name","model","currentAutoIncrementNo","items"],{constructor:function(e,t){this.set({name:e,model:t,currentAutoIncrementNo:1,items:[],itemCount:0})}}),r=[],o=function(e,n){t.Event.trigger(new t.Event.Event(e,"item_change",{item:n.getTarget(),changes:n.getData()}))},i=function(e,n){var o=e.getItems(),i=o[n];o[n]&&e.set("itemCount",e.get("itemCount")-1),delete o[n];var u;for(var a in r)if(u=r[a],u.item.get("id")===n){t.Event.unobserve(i,"change",u.function);break}t.Event.trigger(new t.Event.Event(e,"item_remove",{item:i}))};return n.addMethod("hasItemWhere",function(e){var t,n,r=this.get("items");for(var o in r){t=r[o],n=!1;for(var i=0,u=e.length;u>i&&(n=e[i].test(t),n);i++);if(n)return!0}return!1}),n.addMethod("findItemWhere",function(e){var t,n,r=this.get("items");for(var o in r){t=r[o],n=!1;for(var i=0,u=e.length;u>i&&(n=e[i].test(t),n);i++);if(n)return t}return null}),n.addMethod("findItemsWhere",function(e){var t,n,r=this.get("items"),o=[];for(var i in r){t=r[i],n=!1;for(var u=0,a=e.length;a>u&&(n=e[u].test(t),n);u++);n&&o.push(t)}return o.length>0?o:null}),n.addMethod("hasItemLike",function(e,t){var n=this.get("items");for(var r in n)if(n[r].get(e)===t)return!0;return!1}),n.addMethod("findItemLike",function(e,t){var n=this.get("items");for(var r in n)if(n[r].get(e)===t)return n[r];return null}),n.addMethod("findItemsLike",function(e,t){var n=this.get("items"),r=[];for(var o in n)n[o].get(e)===t&&r.push(n[o]);return r.length>0?r:null}),n.addMethod("findItemsBetween",function(e,t,n){var r=this.get("items"),o=[];for(var i in r){var u=r[i].get(e);u>=t&&n>=u&&o.push(r[i])}return o}),n.addMethod("removeItemLike",function(e,t){var n=this.get("items");for(var r in n)if(n[r].get(e)===t){i(this,r);break}}),n.addMethod("removeItemsLike",function(e,t){var n=this.get("items");for(var r in n)n[r].get(e)===t&&i(this,r)}),n.addMethod("removeItemWhere",function(e){var t,n,r=this.get("items");for(var o in r){t=r[o],n=!1;for(var u=0,a=e.length;a>u&&(n=e[u].test(t),n);u++);if(n){i(this,o);break}}}),n.addMethod("removeItemsWhere",function(e){var t,n,r=this.get("items");for(var o in r){t=r[o],n=!1;for(var u=0,a=e.length;a>u&&(n=e[u].test(t),n);u++);n&&i(this,o)}}),n.addMethod("getNextAutoIncrementNo",function(){var e=this.get("currentAutoIncrementNo");return this.set("currentAutoIncrementNo",e+1),e}),n.addMethod("resetAutoIncrementNo",function(){this.set("currentAutoIncrementNo",1)}),n.addMethod("hasItem",function(e){return-1!==this.get("items").indexOf(e)}),n.addMethod("findItem",function(e){var t=this.get("items");return t[e]||null}),n.addMethod("findOrAddItem",function(e,t){var n=null;return n=this.findItemLike(e,t.get(e)),n||(this.addItem(t),n=t),n}),n.addMethod("removeItem",function(e){for(var t=this.get("items"),n=0,r=t.length;r>n;n++)if(n===e||t[n]===e){i(this,n);break}}),n.addMethod("addItem",function(e){var n=this.get("items"),i=e.getId();if(i||(e.setId(this.getNextAutoIncrementNo()),i=e.getId()),n[i]!==e){n[i]||this.set("itemCount",this.get("itemCount")+1),n[i]=e,t.Event.trigger(new t.Event.Event(this,"item_add",{item:e}));var u=this,a={"function":function(e){o(u,e)},item:e};r.push(a),t.Event.observe(e,"change",a.function)}}),n}),define("core/modules/util/models/promise",["require","../../core/models/promise"],function(e){var t=e("../../core/models/promise");return t}),define("core/modules/persistence/models/syncer",["require","../../../../ampedjs"],function(e){var t=e("../../../../ampedjs"),n=t.Model.create("Syncer",["data"],{constructor:function(){this.set({map:{},data:[]})}});return n.addStaticAttribute("ACTION_CREATE","create"),n.addStaticAttribute("ACTION_DELETE","delete"),n.addStaticAttribute("ACTION_READ","read"),n.addStaticAttribute("ACTION_UPDATE","update"),n.addStaticAttribute("ACTION_LIST","list"),n.addStaticAttribute("STATUS_CREATED","created"),n.addStaticAttribute("STATUS_DELETED","deleted"),n.addStaticAttribute("STATUS_UNCHANGED","unchanged"),n.addStaticAttribute("STATUS_UPDATED","updated"),n.addMethod("map",function(e,t,n){var r=this.get("map"),o=e.getModelName();r[o]||(r[o]={}),r[o][t]=n}),n.addMethod("getSyncStatus",function(e){for(var t,n=this.get("data"),r=0,o=n.length;o>r;r++)if(t=n[r],t.item===e)return t.status;return null}),n.addMethod("setSyncStatus",function(e,t){for(var n,r=this.get("data"),o=0,i=r.length;i>o;o++)if(n=r[o],n.item===e)return void(n.status=t);r.push({item:e,status:t})}),n.addMethod("getSyncAction",function(e){var t=this.getSyncStatus(e),r={};return r[n.STATUS_CREATED]=n.ACTION_CREATE,r[n.STATUS_DELETED]=n.ACTION_DELETE,r[n.STATUS_UNCHANGED]=null,r[n.STATUS_UPDATED]=n.ACTION_UPDATE,r[t]}),n.addMethod("load",function(){}),n.addMethod("save",function(){}),n}),define("core/modules/collections/models/collection-group",["require","../../../../ampedjs","../../util/models/promise","../../persistence/models/syncer"],function(e){var t=e("../../../../ampedjs"),n=e("../../util/models/promise"),r=e("../../persistence/models/syncer"),o=t.Model.create("CollectionGroup",["name","syncer","autoSave"],{constructor:function(e,t,n){this.set({name:e,syncer:t?t:null,collections:{},autoSave:n&&n.autoSave===!1?!1:!0});var o=this;this.observe("item_add",function(e){var t=o.get("syncer"),n=e.getData().item;t&&(t.setSyncStatus(n,r.STATUS_CREATED),o.get("autoSave")&&t.save(n))}),this.observe("item_change",function(e){var t=o.get("syncer"),n=e.getData().item;t&&t.getSyncStatus(n)!==r.STATUS_CREATED&&(t.setSyncStatus(n,r.STATUS_UPDATED),o.get("autoSave")&&t.save(n))}),this.observe("item_remove",function(e){var t=o.get("syncer"),n=e.getData().item;t&&t.getSyncStatus(n)!==r.STATUS_CREATED&&(t.setSyncStatus(n,r.STATUS_DELETED),o.get("autoSave")&&t.save(n))})}}),i=[],u=[],a=[],s=function(e,n){t.Event.trigger(new t.Event.Event(e,"item_add",{collection:n.getTarget(),item:n.getData().item}))},l=function(e,n){t.Event.trigger(new t.Event.Event(e,"item_change",{collection:n.getTarget(),item:n.getData().item,changes:n.getData().changes}))},c=function(e,n){t.Event.trigger(new t.Event.Event(e,"item_remove",{collection:n.getTarget(),item:n.getData().item}))};return o.addMethod("getCollection",function(e){return this.get("collections")[e]}),o.addMethod("addCollection",function(e){var n=this.get("collections");
n[e.get("name")]=e;var r=this,o={collection:e,"function":function(e){s(r,e)}},d={collection:e,"function":function(e){l(r,e)}},f={collection:e,"function":function(e){c(r,e)}};i.push(o),u.push(d),a.push(f),t.Event.observe(e,"item_add",o.function),t.Event.observe(e,"item_change",d.function),t.Event.observe(e,"item_remove",f.function),t.Event.trigger(new t.Event.Event(this,"collection_add",{collection:e}))}),o.addMethod("removeCollection",function(e){var n=this.get("collections"),r="string"==typeof e?null:e.get("name"),o=n[r];delete n[r];var s,l,c,d;for(s in i)if(l=i[s],l.collection===o){t.Event.unobserve(o,"item_add",l.function);break}for(s in u)if(c=u[s],c.collection===o){t.Event.unobserve(o,"item_change",c.function);break}for(s in a)if(d=a[s],d.collection===o){t.Event.unobserve(o,"item_remove",d.function);break}t.Event.trigger(new t.Event.Event(this,"collection_remove",{collection:o}))}),o.addMethod("save",function(e){var t,o,i=new n,u="string"==typeof e?this.get("collections")[e]:e,a=this.get("syncer"),s=u.getItems(),l=0,c=0,d=!1,f=function(){l++,l===c&&d&&i.resolve(s)};for(var h in s)t=s[h],o=a.getSyncStatus(t),null!==o&&o!==r.STATUS_UNCHANGED&&(c++,a.save(t).then(f));return d=!0,i}),o}),define("core/modules/collections/collections",["require","../../../ampedjs","./models/collection","./models/collection-group"],function(e){var t=e("../../../ampedjs"),n=e("./models/collection"),r=e("./models/collection-group");return t.Module.create("Collections",{Collection:n,CollectionGroup:r})}),define("core/modules/util/helpers/string-helper",["require","../../../../ampedjs","../../core/helpers/string-helper"],function(e){var t=e("../../../../ampedjs"),n=e("../../core/helpers/string-helper"),r=t.Helper.create();return r.addStaticMethod("convertToCamelCase",n.convertToCamelCase),r.addStaticMethod("convertToSnakeCase",n.convertToSnakeCase),r.addStaticMethod("lowercaseFirst",n.lowercaseFirst),r.addStaticMethod("uppercaseFirst",n.uppercaseFirst),r.addStaticMethod("humanize",n.humanize),r}),define("core/modules/persistence/models/rest-syncer",["require","../../../../ampedjs","../../util/helpers/string-helper","./syncer","../../core/models/promise","../../ajax/models/xhr"],function(e){var t=e("../../../../ampedjs"),n=e("../../util/helpers/string-helper"),r=e("./syncer"),o=e("../../core/models/promise"),i=e("../../ajax/models/xhr"),u=t.Model.create("RestSyncer",["rootUrl"],{constructor:function(e){this.set("rootUrl",e)},parent:r}),a=function(e,t,o,u){var a={url:"",method:""},s=e.get("map"),l=t.getModelName(),c=e.get("rootUrl");if(s[l]&&s[l][o]&&(a.url=c+"/"+s[l][o].url,a.method=s[l][o].method||""),""===a.url&&(a.url=s[l]&&s[l]["*"]?c+"/"+s[l]["*"].url:c+"/"+n.convertToSnakeCase(l).toLowerCase()),o!==r.ACTION_CREATE&&o!==r.ACTION_LIST&&(a.url+="/"+u),""===a.method){var d={};d[r.ACTION_CREATE]=i.METHOD_POST,d[r.ACTION_DELETE]=i.METHOD_DELETE,d[r.ACTION_READ]=i.METHOD_GET,d[r.ACTION_UPDATE]=i.METHOD_PUT,d[r.ACTION_LIST]=i.METHOD_GET,a.method=d[o]}return a};return u.addMethod("map",function(e,t,n){var r=this.get("map"),o=e.getModelName();r[o]||(r[o]={}),r[o][t]={url:"string"==typeof n.url?n.url:"string"==typeof n?n:null,method:"string"==typeof n.method?n.method:null}}),u.addMethod("load",function(e,t){var u,s,l=this,c=new o,d={};if(Array.isArray(t))for(var f=0,h=t.length;h>f;f++)u=t[f],s=u.get("operation"),d[n.convertToSnakeCase(u.get("attribute"))]=("==="===s||"=="===s?"":s)+u.get("value");var p,m;return!Array.isArray(t)||1!==t.length||"id"!==t[0].get("attribute")||"==="!==t[0].get("operation")&&"=="!==t[0].get("operation")?(m=a(this,e,r.ACTION_LIST),p=new i(m.url,m.method),t&&t.length>0&&p.setData(d)):(m=a(this,e,r.ACTION_READ,t[0].get("value")),p=new i(m.url,m.method)),p.send().then(function(t){var n;try{if(p.getStatus()>=400&&p.getStatus()<=600)throw new Error("The response was a HTTP "+p.getStatus()+" error");var o=JSON.parse(t),i=[];if(Array.isArray(o))for(var u in o)n=e.fromObject(o[u]),i.push(n),l.setSyncStatus(n,r.STATUS_UNCHANGED);else n=e.fromObject(o),i.push(n),l.setSyncStatus(n,r.STATUS_UNCHANGED);c.resolve(i)}catch(a){c.reject(new Error("The response could not be parsed as JSON."))}},function(e){c.reject(e)}),c}),u.addMethod("save",function(e){var t=this,u=new o,s=this.getSyncAction(e);s||u.reject(new Error("Item is unchanged."));var l=a(this,e.getModel(),s,e.getId()),c=new i(l.url,l.method);if(s!==r.ACTION_DELETE){var d=e.toObject();delete d.id,c.setData(d)}return c.send().then(function(o){try{if(s!==r.ACTION_DELETE){var i,a,l=JSON.parse(o),c={};for(i in l)a=n.convertToCamelCase(i),e.get(a)!==l[i]&&(c[a]=l[i]);e.set(c,{silent:!0})}t.setSyncStatus(e,r.STATUS_UNCHANGED),u.resolve(e)}catch(d){u.reject(d)}},function(e){u.reject(e)}),u}),u}),define("core/modules/persistence/persistence",["require","../../../ampedjs","./models/syncer","./models/rest-syncer"],function(e){var t=e("../../../ampedjs"),n=e("./models/syncer"),r=e("./models/rest-syncer");return t.Module.create("Persistence",{Syncer:n,RestSyncer:r})}),define("core/modules/util/models/predicate",["require","../../../../ampedjs"],function(e){var t=e("../../../../ampedjs"),n=t.Model.create("Predicate",["attribute","value","operation"],{constructor:function(e,t,n){this.set({attribute:e,value:t,operation:n?n:"==="})}});return n.addStaticMethod("normalize",function(e){var t,r=[];if(Array.isArray(e))for(var o=0,i=e.length;i>o;o++)t=e[o],r.push(new n(t.attribute,t.value,t.operation));else for(var u in e)r.push(new n(u,e[u]));return r}),n.addMethod("test",function(e){var t=!1,n=this.get("operation"),r=e.get(this.get("attribute")),o=this.get("value");if("function"==typeof n)t=n(r,o);else switch(n){case"===":t=r===o;break;case"==":t=r==o;break;case">=":t=r>=o;break;case">":t=r>o;break;case"<=":t=o>=r;break;case"<":t=o>r}return t}),n}),define("core/modules/util/helpers/function-helper",["require","../../../../ampedjs","../../core/helpers/function-helper"],function(e){var t=e("../../../../ampedjs"),n=e("../../core/helpers/function-helper"),r=t.Helper.create();return r.addStaticMethod("noop",n.noop),r.addStaticMethod("override",n.override),r}),define("core/modules/util/helpers/model-helper",["require","../../../../ampedjs","../../core/helpers/model-helper"],function(e){var t=e("../../../../ampedjs"),n=e("../../core/helpers/model-helper"),r=t.Helper.create();return r.addStaticMethod("getGetter",n.getGetter),r.addStaticMethod("getSetter",n.getSetter),r}),define("core/modules/util/helpers/storage-helper",["require","../../../../ampedjs"],function(e){var t=e("../../../../ampedjs"),n=t.Helper.create();return n.addStaticMethod("set",function(e,t){sessionStorage.setItem(e,t)}),n.addStaticMethod("get",function(e){return sessionStorage.getItem(e)}),n.addStaticMethod("reset",function(e){sessionStorage.removeItem(e)}),n}),define("core/modules/util/helpers/uuid-helper",["require","../../../../ampedjs","../../core/helpers/uuid-helper"],function(e){var t=e("../../../../ampedjs"),n=e("../../core/helpers/uuid-helper"),r=t.Helper.create();return r.addStaticMethod("generateUuid",n.generateUuid),r}),define("core/modules/util/util",["require","../../../ampedjs","./models/predicate","./models/promise","./helpers/function-helper","./helpers/model-helper","./helpers/storage-helper","./helpers/string-helper","./helpers/uuid-helper"],function(e){var t=e("../../../ampedjs"),n=e("./models/predicate"),r=e("./models/promise"),o=e("./helpers/function-helper"),i=e("./helpers/model-helper"),u=e("./helpers/storage-helper"),a=e("./helpers/string-helper"),s=e("./helpers/uuid-helper");return t.Module.create("Util",{Predicate:n,Promise:r,FunctionHelper:o,ModelHelper:i,StorageHelper:u,StringHelper:a,UuidHelper:s})});